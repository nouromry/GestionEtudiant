<div class="etu">
  <h1>Liste des Etudiants</h1>

  <input type="text" [(ngModel)]="searchQuery" placeholder="Rechercher par CIN" (input)="filterEtudiants()" class="search-input" />
  <button type="button" class="btn btn-outline-secondary btn-sm"  (click)="addEtudiant()">Ajouter Étudiant</button>

  <table>
    <thead>
      <tr>
        <th>CIN</th>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Date Naissance</th>
        <th>Téléphone</th>
        <th>Email</th>
        <th>Classe</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let etudiant of filteredEtudiants">
        <td>{{ etudiant.cin }}</td>
        <td>{{ etudiant.nom }}</td>
        <td>{{ etudiant.prenom }}</td>
        <td>{{ etudiant.dateNaissance | date }}</td>
        <td>{{ etudiant.telephone }}</td>
        <td>{{ etudiant.email }}</td>
        <td>{{ etudiant.classe }}</td>
        <td>
          <button type="button" class="btn btn-outline-secondary btn-sm" (click)="viewDetails(etudiant.id)">Plus Détails</button>
          <button type="button" class="btn btn-outline-secondary btn-sm" (click)="viewNotes(etudiant.id)">Notes</button>
          <button type="button" class="btn btn-outline-secondary btn-sm" (click)="viewAbsences(etudiant.id)">Absences</button>
          <button type="button" class="btn btn-outline-secondary btn-sm" (click)="editEtudiant(etudiant)">Modifier</button>
        </td>
      </tr>
    </tbody>
  </table>


  

  <div *ngIf="isEditing" class="form-container">
    <div class="form-card">
    <h3 class="form-title">{{ selectedEtudiant?.id ? 'Modifier Étudiant' : 'Ajouter Étudiant' }}</h3>
    
    <form>
      <div class="form-group">
        <label for="cin" class="form-label">CIN:</label>
        <input id="cin" [(ngModel)]="selectedEtudiant.cin" name="cin" class="form-control" />
      </div>

      <div class="form-group">
        <label for="nom" class="form-label">Nom:</label>
        <input id="nom" [(ngModel)]="selectedEtudiant.nom" name="nom" class="form-control" />
      </div>

      <div class="form-group">
        <label for="prenom" class="form-label">Prénom:</label>
        <input id="prenom" [(ngModel)]="selectedEtudiant.prenom" name="prenom" class="form-control" />
      </div>

      <div class="form-group">
        <label for="dateNaissance" class="form-label">Date Naissance:</label>
        <input id="dateNaissance" type="date" [(ngModel)]="selectedEtudiant.dateNaissance" name="dateNaissance" class="form-control" />
      </div>

      <div class="form-group">
        <label for="telephone" class="form-label">Téléphone:</label>
        <input id="telephone" [(ngModel)]="selectedEtudiant.telephone" name="telephone" class="form-control" />
      </div>

      <div class="form-group">
        <label for="email" class="form-label">Email:</label>
        <input id="email" [(ngModel)]="selectedEtudiant.email" name="email" class="form-control" />
      </div>

      <div class="form-group">
        <label for="classe" class="form-label">Classe:</label>
        <input id="classe" [(ngModel)]="selectedEtudiant.classe" name="classe" class="form-control" />
      </div>

      
      <div class="form-actions">
        <button type="button" (click)="saveEtudiant()" class="btn btn-primary">Valider</button>
        <button type="button" (click)="cancelEdit()" class="btn btn-secondary">Annuler</button>
      </div>
    </form>
  </div>

</div>
</div>